#!/bin/bash

date='date +"%b-%d %a"'
time='date +"%I:%M %p"'
mute='pamixer --get-mute'
volume='pamixer --get-volume'
audio='[ "$(eval $mute)" == true ] && echo "mute" || echo "vol $(eval $volume)%"'

set_status() {
  xsetroot -name  "$(eval $audio) | $(eval $date) | $(eval $time)"
}

case $1 in
  --loop)
    while set_status
    do 
        sleep 1 
    done &
    ;;

  --refresh)
    set_status
    ;;
esac

